---
layout: post
title: "[AWS] 프로그라피 7기 AWS 스터디 3주차 학습 내용 정리"
subtitle: 🔖 5장. 확장 가능한 데이터베이스 서버 만들기 - 6장. DNS를 손쉽게 연결하고 관리하기
categories: DevOps
tags: [AWS_Discovery_Book, RDS, Route_53]
---

### 🗄 RDS

6개의 데이터베이스 엔진 중에서 선택해 사용할 수 있는 아마존 관계형 데이터베이스 서비스

#### 백업

1.  자동 백업

- 매일 스냅샷을 생성하고 트랜잭션 로그를 저장
- 백업 정보는 S3에 저장
- 최대 35일 동안 데이터를 보존하여 어떤 시간으로든 롤백 가능
- RDS 인스턴스 삭제시 자동 생성된 스냅샷은 모두 삭제

2. 수동 백업

- 주로 사용자로부터 스냅샷을 생성
- RDS 인스턴스가 삭제되어도 계속 보관

3. 공통

- 스냅샷 롤백/백업은 새로운 인스턴스를 생성하여 수행

#### Multi-AZ : 멀티 가용영역

- 두 개 이상의 가용영역에 걸쳐 원본 DB와 복제된 DB가 존재하는 것
- 복제된 DB에 접근은 불가
- 원본 DB에 장애 발생 시 자동으로 복제된 DB가 원본으로 승격되어 사용
- 성능 개선을 위한것이 아닌, `안정성을 위한 서비스`

#### Read Replica : 읽기 전용 복제본

- 원본 DB의 읽기 전용 복제본을 생성하여 쓰기는 원본에 읽기는 복제본에서 처리
- 복제본을 생성하기 위해선 원본 DB의 자동 백업 기능이 활성화 되어있어야 함
- 총 5개까지 생성이 가능하며 각각의 복제본은 고유 endpoint가 할당되어 접근이 가능
- 원본 DB 장애 발생 시 수동으로 endpoint를 변경해주어야 함
- 복제본 자체에 Multi-AZ 설정이 가능
- 안정성을 위한것이 아닌, `성능 개선을 위한 서비스`

---

### 🪄 DNS

- 사람이 읽을 수 있는 도메인 이름을 IP 주소로 변환하는 시스템
- 대표적으로 Amazon Route 53 서비스가 있음

#### 서버 구성

- DNS 해석기
- 루트 네임 서버
- TLD(Top Level Domain) 네임 서버
- 권한 있는(Authoritative) 네임 서버

#### 동작

![DNS_process](https://user-images.githubusercontent.com/76666857/166563241-7a3fdf30-9ecf-4c70-81ff-097eb6a5866d.png)

- Local DNS Server = DNS 해석기, 주로 통신사에서 제공해주는 DNS 서버 사용

### Amazon Route 53 라우팅 정책

#### 1. 단순 라우팅 (Simple Routing)

- 도메인에 대해 하나의 리소스(서버, 로드 밸런서 등)지정
- 레코드 값은 여러 개 입력 가능하나 랜덤으로 하나의 값이 응답함

#### 2. 가중치 기반 라우팅 (Weighted)

- 도메인에 대해 다수의 리소스를 지정하고 라우팅되는 비중을 지정할 수 있음
- 가중치는 0~255 사이에서 설정 가능
- 가중치 값이 0이라면 DNS 응답 ❌

#### 3. 지역 기반 라우팅 (Geolocation)

- 사용자의 로컬 DNS 서버의 IP 위치를 기반한 가장 인접한 리전의 리소스를 대상으로 라우팅
- 사용자의 위치에 따라 현지화된 콘텐츠 제공 가능

#### 4. 지연 시간 기반 라우팅 (Latency)

- 사용자 위치상 인접된 리소스가 있는 리전들과의 지연 시간을 파악 후 가장 짧은 대상으로 라우팅

### 5. 장애 조치 라우팅 (Failover)

- 레코드값 중 첫 번째와 두번째 리소스를 정해두고 첫 번째 리소스가 비정상일 경우 두 번째 리소스로 라우팅
- 주기적인 상태 확인을 통해 Active 상태를 알 수 있음

### 6. 다중값 응답 라우팅 (Multivalue answer)

- 요청에 대해 여러 리소스를 반환하도록 구성 가능
